(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{30:function(t,e,n){},32:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),i=n(22),c=n.n(i),s=(n(30),n(16)),o=n(3),u=n(4),l=n(6),d=n(5),j=n(8),b=n(2),h=n.n(b),p=n(7),m=n(14),f=n(18),O=n(13),v=(n(32),n(0)),x=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.album,e=t.collectionId,n=t.artistName,a=t.collectionName,r=t.artworkUrl100;return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h1",{children:n}),Object(v.jsx)("h2",{children:a}),Object(v.jsx)("img",{src:r,alt:a}),Object(v.jsx)("div",{children:Object(v.jsx)(O.b,{to:"/album/".concat(e),"data-testid":"link-to-album-".concat(e),children:"Ver"})})]})}}]),n}(r.a.Component),g="user",k=function(t){return localStorage.setItem(g,JSON.stringify(t))},S=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},y=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(g));null===e&&(e={}),S(e)(t)}))},N=function(t){return new Promise((function(e){k(Object(s.a)(Object(s.a)({},{name:"",email:"",image:"",description:""}),t)),S("OK")(e)}))},w=function(t){return new Promise((function(e){k(Object(s.a)({},t)),S("OK")(e)}))},I=(n(42),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).state={userName:""},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=Object(p.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:(e=t.sent)&&this.setState({userName:e.name});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state.userName;return Object(v.jsxs)("div",{children:["(",Object(v.jsxs)("header",{className:"header-component",children:[Object(v.jsxs)("nav",{children:[Object(v.jsx)(O.b,{to:"/search","data-testid":"link-to-search",children:"Busca"}),Object(v.jsx)(O.b,{to:"/favorites","data-testid":"link-to-favorites",children:"Favoritos"}),Object(v.jsx)(O.b,{to:"/profile","data-testid":"link-to-profile",children:"Perfil"})]}),Object(v.jsxs)("div",{className:"user-container",children:[Object(v.jsx)(f.a,{}),Object(v.jsx)("p",{"data-testid":"header-user-name",children:t})]})]}),")"]})}}]),n}(r.a.Component)),C=n.p+"static/media/loading.a7559219.gif",D=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(v.jsx)("img",{src:C,alt:"loading",id:"loading"})}}]),n}(r.a.Component),U=function(){var t=Object(p.a)(h.a.mark((function t(e){var n,a,r,i,c,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return r=t.sent,t.next=7,r.json();case 7:return i=t.sent,c=i.results,s=c.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=U,P=(n(43),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).handleInput=function(e){var n=e.target,a=n.name,r=n.value;t.setState(Object(m.a)({},a,r),(function(){r.length>=2?t.setState({isDisabled:!1}):t.setState({isDisabled:!0})}))},t.handleClick=Object(p.a)(h.a.mark((function e(){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.artistName,t.setState({loading:!0,savedArtist:n}),e.next=4,F(n);case 4:a=e.sent,t.setState({artistName:"",loading:!1,albuns:a});case 6:case"end":return e.stop()}}),e)}))),t.state={isDisabled:!0,artistName:"",loading:!1,savedArtist:"",albuns:[]},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.isDisabled,n=t.artistName,a=t.loading,r=t.savedArtist,i=t.albuns;return Object(v.jsxs)("div",{children:[Object(v.jsx)(I,{}),Object(v.jsx)("div",{className:"page-search",children:a?Object(v.jsx)(D,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{"data-testid":"search-artist-input",type:"text",onChange:this.handleInput,name:"artistName",value:n}),Object(v.jsx)("button",{"data-testid":"search-artist-button",type:"button",disabled:e,onClick:this.handleClick,children:Object(v.jsx)(f.b,{})}),Object(v.jsx)("p",{children:"Resultado de \xe1lbuns de: ".concat(r)}),Object(v.jsx)("div",{className:"search-result",children:0===i.length?Object(v.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"}):i.map((function(t){return Object(v.jsx)(x,{album:t},t.collectionId)}))})]})})]})}}]),n}(r.a.Component)),J=function(){var t=Object(p.a)(h.a.mark((function t(e){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=J,T=n(25),A="favorite_songs";JSON.parse(localStorage.getItem(A))||localStorage.setItem(A,JSON.stringify([]));var K=function(){return JSON.parse(localStorage.getItem(A))},z=function(t){return localStorage.setItem(A,JSON.stringify(t))},E=function(t){return function(e){setTimeout((function(){e(t)}),500)}},V=function(){return new Promise((function(t){var e=K();E(e)(t)}))},B=function(t){return new Promise((function(e){if(t){var n=K();z([].concat(Object(T.a)(n),[t]))}E("OK")(e)}))},L=function(t){return new Promise((function(e){var n=K();z(n.filter((function(e){return e.trackId!==t.trackId}))),E("OK")(e)}))},R=(n(44),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setFavorite=function(){var e=Object(p.a)(h.a.mark((function e(n){var a,r,i,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.target,r=t.props,i=r.music,c=r.getfavorites,console.log(a.checked),t.setState({loading:!0}),!1!==a.checked){e.next=9;break}return e.next=7,L(i);case 7:e.next=11;break;case 9:return e.next=11,B(i);case 11:t.setState({loading:!1}),c();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.checkFavorite=function(e){var n=t.props.favoriteSongs;return n.length>0&&(console.log(n),n.some((function(t){return t.trackId===e})))},t.state={loading:!1},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.music,e=t.trackName,n=t.previewUrl,a=t.trackId,r=this.state.loading;return Object(v.jsx)("div",{children:r?Object(v.jsx)(D,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:e}),Object(v.jsxs)("audio",{"data-testid":"audio-component",src:n,controls:!0,children:[Object(v.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(v.jsx)("code",{children:"audio"})]}),Object(v.jsx)("label",{htmlFor:"favorite",children:Object(v.jsx)("input",{"data-testid":"checkbox-music-".concat(a),type:"checkbox",name:"favorite",onChange:this.setFavorite,checked:this.checkFavorite(a),id:"favorite"})})]})})}}]),n}(r.a.Component)),_=(n(45),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).musics=Object(p.a)(h.a.mark((function e(){var n,a,r,i,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.match.params.id,e.next=3,M(n);case 3:a=e.sent,r=a[0],i=r.artistName,c=r.collectionName,s=r.artworkUrl100,t.setState({musics:a.filter((function(t){return"song"===t.kind})),artistName:i,collectionName:c,artworkUrl100:s});case 6:case"end":return e.stop()}}),e)}))),t.getfavorites=Object(p.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),e.next=3,V();case 3:n=e.sent,t.setState({favoriteSongs:n,loading:!1});case 5:case"end":return e.stop()}}),e)}))),t.state={musics:[],artistName:"",collectionName:"",artworkUrl100:"",favoriteSongs:[],loading:!1},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.musics(),this.getfavorites()}},{key:"render",value:function(){var t=this,e=this.state,n=e.musics,a=e.artistName,r=e.collectionName,i=e.artworkUrl100,c=e.loading,s=e.favoriteSongs;return console.log(s),Object(v.jsxs)("div",{"data-testid":"page-album",children:[Object(v.jsx)(I,{}),Object(v.jsx)("div",{className:"player-container",children:c?Object(v.jsx)(D,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{"data-testid":"artist-name",children:a}),Object(v.jsx)("h3",{"data-testid":"album-name",children:r}),Object(v.jsx)("img",{src:i,alt:r})]}),Object(v.jsx)("div",{className:"music-container",children:n.map((function(e){return Object(v.jsx)(R,{music:e,favoriteSongs:s,getfavorites:t.getfavorites},e.trackId)}))})]})})]})}}]),n}(r.a.Component)),q=(n(46),n.p+"static/media/trybetunes.49141a29.png"),G=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).handleInput=function(e){var n=e.target,a=n.name,r=n.value;t.setState(Object(m.a)({},a,r),(function(){r.length>=3?t.setState({isDisabled:!1}):t.setState({isDisabled:!0})}))},t.handleLogin=Object(p.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.loginInput,t.setState({loading:!0}),e.next=4,N({name:n});case 4:t.setState({loading:!1,redirectTo:"/search"});case 5:case"end":return e.stop()}}),e)}))),t.state={loginInput:"",isDisabled:!0,loading:!1,redirectTo:null},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.loading,n=t.redirectTo,a=t.loginInput,r=t.isDisabled;return Object(v.jsxs)("div",{className:"login-container",children:[e?Object(v.jsx)(D,{className:"loading"}):Object(v.jsxs)("div",{"data-testid":"page-login",className:"login",children:[Object(v.jsx)("img",{src:q,alt:"headphone"}),Object(v.jsx)("input",{"data-testid":"login-name-input",type:"text",name:"loginInput",onChange:this.handleInput,value:a,placeholder:"Nome"}),Object(v.jsx)("button",{"data-testid":"login-submit-button",type:"button",disabled:r,onClick:this.handleLogin,children:"Entrar"})]}),n&&Object(v.jsx)(j.a,{to:n})]})}}]),n}(r.a.Component),H=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).handleUser=Object(p.a)(h.a.mark((function e(){var n,a,r,i,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:n=e.sent,a=n.name,r=n.email,i=n.description,c=n.image,t.setState({name:a,email:r,description:i,image:c,loading:!1});case 5:case"end":return e.stop()}}),e)}))),t.handleInput=function(e){var n=e.target,a=n.name,r=n.value;t.setState(Object(m.a)({},a,r),t.handleValidation)},t.handleValidation=function(){var e=t.state,n=e.name,a=e.email,r=e.description,i=e.image,c=!0;n.length>0&&a.length>0&&r.length>0&&i.length>0&&a.match(/^[a-z0-9]+@[a-z0-9]+\.[a-z]+/i)&&(c=!1),t.setState({isDisabled:c})},t.handleSave=function(){t.setState({loading:!0},Object(p.a)(h.a.mark((function e(){var n,a,r,i,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,a=n.name,r=n.email,i=n.description,c=n.image,s={name:a,email:r,image:c,description:i},e.next=4,w(s);case 4:case"end":return e.stop()}}),e)})))),console.log(t.props),t.setState({loading:!1},(function(){t.props.history.push("/profile")}))},t.state={loading:!0,name:"",email:"",image:"",description:"",isDisabled:!1},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.handleUser()}},{key:"render",value:function(){var t=this.state,e=t.loading,n=t.name,a=t.email,r=t.description,i=t.image,c=t.isDisabled;return Object(v.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(v.jsx)(I,{}),e?Object(v.jsx)(D,{}):Object(v.jsxs)("form",{children:[Object(v.jsx)("label",{htmlFor:"name",children:Object(v.jsx)("input",{name:"name","data-testid":"edit-input-name",value:n,type:"text",onChange:this.handleInput,id:"name"})}),Object(v.jsx)("label",{htmlFor:"email",children:Object(v.jsx)("input",{name:"email","data-testid":"edit-input-email",value:a,type:"text",onChange:this.handleInput,id:"email"})}),Object(v.jsx)("label",{htmlFor:"description",children:Object(v.jsx)("textarea",{name:"description","data-testid":"edit-input-description",value:r,onChange:this.handleInput,id:"description"})}),Object(v.jsx)("label",{htmlFor:"image",children:Object(v.jsx)("input",{name:"image","data-testid":"edit-input-image",value:i,type:"text",onChange:this.handleInput,id:"image"})}),Object(v.jsx)("button",{"data-testid":"edit-button-save",disabled:c,type:"button",onClick:this.handleSave,children:"Salvar"})]})]})}}]),n}(r.a.Component),Q=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{"data-testid":"page-not-found",children:[Object(v.jsx)("h4",{children:"Oooops!"}),Object(v.jsx)("h6",{children:"404 Page not found"})]})}}]),n}(r.a.Component),W=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).handleUser=Object(p.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),e.next=3,y();case 3:n=e.sent,t.setState({user:n,loading:!1});case 5:case"end":return e.stop()}}),e)}))),t.state={loading:!1,user:{}},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.handleUser()}},{key:"render",value:function(){var t=this.state,e=t.loading,n=t.user;return Object(v.jsxs)("div",{"data-testid":"page-profile",children:[Object(v.jsx)(I,{}),e?Object(v.jsx)(D,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"user-container",children:[Object(v.jsx)("img",{src:"url-to-image",alt:"profile","data-testid":"profile-image"}),Object(v.jsx)("h1",{children:n.name}),Object(v.jsx)("p",{children:n.email}),Object(v.jsx)("p",{children:n.description})]}),Object(v.jsx)(O.b,{to:"/profile/edit",children:"Editar perfil"})]})]})}}]),n}(r.a.Component),X=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).getfavorites=Object(p.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),e.next=3,V();case 3:n=e.sent,t.setState({favoriteSongs:n,loading:!1});case 5:case"end":return e.stop()}}),e)}))),t.state={loading:!1,favoriteSongs:[]},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getfavorites()}},{key:"render",value:function(){var t=this,e=this.state,n=e.loading,a=e.favoriteSongs;return Object(v.jsxs)("div",{"data-testid":"page-favorites",children:[Object(v.jsx)(I,{}),n?Object(v.jsx)(D,{}):Object(v.jsx)("div",{className:"music-container",children:a.map((function(e){return Object(v.jsx)(R,{getfavorites:t.getfavorites,music:e,favoriteSongs:a},e.trackId)}))})]})}}]),n}(r.a.Component),Y=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(v.jsxs)(j.d,{children:[Object(v.jsx)(j.b,{path:"/search",component:P}),Object(v.jsx)(j.b,{path:"/album/:id",component:_}),Object(v.jsx)(j.b,{path:"/favorites",component:X}),Object(v.jsx)(j.b,{path:"/profile/edit",render:function(t){return Object(v.jsx)(H,Object(s.a)({},t))}}),Object(v.jsx)(j.b,{path:"/profile",component:W}),Object(v.jsx)(j.b,{exact:!0,path:"/",component:G}),Object(v.jsx)(j.b,{path:"*",component:Q})]})}}]),n}(r.a.Component),Z=Y;c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(O.a,{children:Object(v.jsx)(Z,{})})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.7d323e3a.chunk.js.map